# SQL Schema 개발 및 관리 메뉴얼

> 최초작성일: 2025-11-06  
> 최신개정일: 2025-11-06  
> 최신개정자: 이한경  
> 작성자: 이한경  

- 이 프로젝트는 sqlite3를 사용합니다.

## DB 파일

- DB 파일은 `/db` 폴더에 위치해야 합니다.
- 파일의 경로는 `.env` 파일로 설정합니다. 

## SQL 스크립트

- SQL 스크립트 파일 및 이에 필요한 데이터 파일은 `/script/migrations/` 폴더에 있습니다.
- 이 이후 패치 파일은 `V{i}__description.sql` 형식의 이름으로 작성합니다. 한 번 작성된 패치 파일을 수정하여서는 안 됩니다. 
- DB 초기 생성을 편리하게 하기 위해 `index.sh` 파일을 작성합니다. 패치 파일을 추가할 때 기존 파일의 적용 스크립트 뒤에 새로운 패치 파일 적용 스크립트를 추가합니다. 

- 기존 `{i}.sql` 파일명을 가진 패치 파일을 관리하는 방식을 이 문서 최초 작성과 함께 개선하여 이전에 작성된 2~7.sql 파일이 존재합니다. 
- 이 문서 최초 작성 시 DB 초기화 파일을 기준으로 `B7__baseline.sql`을 작성하였습니다. 
  - `B7`을 실행하기 위헤 csv 파일 3개가 필요합니다.
  - `majors.csv`: 단과대명과 전공명으로 이루어진 파일로 `major` 테이블에 추가됩니다.
  - `check_user_status_rules.csv`: user status에 따라 금지되는 API 경로를 `check_user_status_rule` 테이블에 추가합니다. `CheckUserStatusMiddleware`에 의해 사용됩니다.
  - `presidents.csv`: 이메일과 이름으로 이루어진 파일로 `user` 테이블에 추가됩니다. `presidents.example.csv` 파일의 값이 모두 포함되어야 이 API를 사용하는 다른 프로젝트가 정상적으로 작동합니다. 
